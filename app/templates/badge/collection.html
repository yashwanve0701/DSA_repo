<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Badge Collection - CodeLearner</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bronze: #CD7F32;
            --silver: #C0C0C0;
            --gold: #FFD700;
            --platinum: #E5E4E2;
            --diamond: #B9F2FF;
            --legendary: #FF6B6B;
            --path-bronze: #8B4513;
            --path-silver: #808080;
            --path-gold: #B8860B;
            --path-platinum: #A0A0A0;
            --path-diamond: #4682B4;
            --path-legendary: #8B0000;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding-bottom: 50px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .badge-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }
        
        .badge-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--bronze), var(--silver), var(--gold), var(--platinum), var(--diamond), var(--legendary));
        }
        
        .badge-card {
            transition: all 0.3s ease;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
            background: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .badge-card.locked {
            filter: grayscale(1);
            opacity: 0.6;
        }
        
        .badge-card.earned {
            animation: gentleGlow 3s infinite alternate;
            border-color: currentColor;
        }
        
        .badge-card.equipped {
            border: 3px solid var(--legendary);
            box-shadow: 0 0 30px var(--legendary);
            animation: equippedGlow 2s infinite alternate;
        }
        
        .badge-icon {
            font-size: 4rem;
            margin-bottom: 15px;
            display: block;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.2));
        }
        
        .badge-level {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            border: 2px solid white;
        }
        
        .xp-progress {
            height: 8px;
            border-radius: 4px;
            margin: 10px 0;
            background: rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .xp-progress-bar {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease;
        }
        
        .badge-bronze { 
            background: linear-gradient(135deg, #f3e9dc, #e6c9a8);
            color: var(--bronze);
            border-color: var(--bronze);
        }
        .badge-silver { 
            background: linear-gradient(135deg, #f5f5f5, #e0e0e0);
            color: var(--silver);
            border-color: var(--silver);
        }
        .badge-gold { 
            background: linear-gradient(135deg, #fff9e6, #ffedb3);
            color: var(--gold);
            border-color: var(--gold);
        }
        .badge-platinum { 
            background: linear-gradient(135deg, #f8f8f8, #e8e8e8);
            color: var(--platinum);
            border-color: var(--platinum);
        }
        .badge-diamond { 
            background: linear-gradient(135deg, #e6f7ff, #c2e7ff);
            color: var(--diamond);
            border-color: var(--diamond);
        }
        .badge-legendary { 
            background: linear-gradient(135deg, #ffe6e6, #ffcccc);
            color: var(--legendary);
            border-color: var(--legendary);
        }
        
        .badge-level-bronze { background: var(--bronze); color: white; }
        .badge-level-silver { background: var(--silver); color: #333; }
        .badge-level-gold { background: var(--gold); color: #333; }
        .badge-level-platinum { background: var(--platinum); color: #333; }
        .badge-level-diamond { background: var(--diamond); color: #333; }
        .badge-level-legendary { background: var(--legendary); color: white; }
        
        .user-header {
            background: linear-gradient(135deg, #2d3748, #4a5568);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .user-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100" fill="rgba(255,255,255,0.1)"/></svg>');
            background-size: cover;
        }
        
        .current-badge-display {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
            border: 3px solid white;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        
        .current-badge-icon {
            font-size: 5rem;
            margin-bottom: 15px;
            filter: drop-shadow(3px 3px 6px rgba(0,0,0,0.3));
        }
        
        @keyframes gentleGlow {
            from { box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
            to { box-shadow: 0 5px 25px rgba(255,215,0,0.3); }
        }
        
        @keyframes equippedGlow {
            from { box-shadow: 0 0 20px var(--legendary); }
            to { box-shadow: 0 0 40px var(--legendary), 0 0 60px rgba(255,107,107,0.3); }
        }
        
        .badge-shine {
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to right,
                rgba(255,255,255,0) 0%,
                rgba(255,255,255,0.4) 50%,
                rgba(255,255,255,0) 100%
            );
            transform: rotate(30deg);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { left: -50%; }
            100% { left: 150%; }
        }
        
        /* Pathway Styles */
        .pathway-container {
            position: relative;
            margin: 40px 0;
            padding: 20px 0;
        }
        
        .pathway-line {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(90deg, 
                var(--path-bronze) 0%, 
                var(--path-silver) 20%, 
                var(--path-gold) 40%, 
                var(--path-platinum) 60%, 
                var(--path-diamond) 80%, 
                var(--path-legendary) 100%);
            transform: translateY(-50%);
            border-radius: 4px;
            z-index: 1;
        }
        
        .pathway-progress {
            position: absolute;
            top: 50%;
            left: 0;
            height: 8px;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            transform: translateY(-50%);
            border-radius: 4px;
            z-index: 2;
            transition: width 1.5s ease-in-out;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }
        
        .pathway-badges {
            display: flex;
            justify-content: space-between;
            position: relative;
            z-index: 3;
        }
        
        .pathway-badge {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            border: 3px solid white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            background: white;
        }
        
        .pathway-badge:hover {
            transform: scale(1.2) translateY(-10px);
            z-index: 10;
        }
        
        .pathway-badge.earned {
            animation: badgeBounce 2s infinite;
        }
        
        .pathway-badge.locked {
            filter: grayscale(1);
            opacity: 0.5;
        }
        
        .pathway-badge.equipped {
            border-color: var(--legendary);
            box-shadow: 0 0 20px var(--legendary);
        }
        
        @keyframes badgeBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .pathway-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.9rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            z-index: 100;
        }
        
        .pathway-badge:hover .pathway-tooltip {
            opacity: 1;
        }
        
        .stats-card {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .stats-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .achievement-banner {
            background: linear-gradient(135deg, #ff9a00, #ff6b6b);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            animation: bannerPulse 2s infinite;
        }
        
        @keyframes bannerPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        .floating-badge {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(255,107,107,0.4);
            z-index: 1000;
            animation: float 3s infinite ease-in-out;
            transition: transform 0.3s;
        }
        
        .floating-badge:hover {
            transform: scale(1.1);
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .badge-counter {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4757;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-dark bg-dark navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('study.all_topics') }}">
                <i class="fas fa-code me-2"></i>CodeLearner
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('study.all_topics') }}">
                            <i class="fas fa-home"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <span class="nav-link text-warning">
                            <i class="fas fa-star"></i> {{ current_xp }} XP
                        </span>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <!-- User Header -->
        <div class="user-header">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h2><i class="fas fa-trophy me-2"></i>{{ user.username }}'s Coding Journey</h2>
                    <div class="row mt-3">
                        <div class="col-md-4">
                            <div class="stats-card">
                                <i class="fas fa-star fa-2x"></i>
                                <div class="stats-number">{{ current_xp }}</div>
                                <small>Total XP</small>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="stats-card" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">
                                <i class="fas fa-trophy fa-2x"></i>
                                <div class="stats-number">{{ earned_badge_ids|length }}/{{ all_badges|length }}</div>
                                <small>Badges Earned</small>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="stats-card" style="background: linear-gradient(135deg, #2ecc71, #27ae60);">
                                <i class="fas fa-chart-line fa-2x"></i>
                                <div class="stats-number">
                                    {% if all_badges|length > 0 %}
                                        {{ ((earned_badge_ids|length / all_badges|length) * 100)|int }}
                                    {% else %}
                                        0
                                    {% endif %}%
                                </div>
                                <small>Completion</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Current Equipped Badge -->
                <div class="col-md-4">
                    <div class="current-badge-display">
                        {% if equipped_badge %}
                            <div class="current-badge-icon">{{ equipped_badge.icon }}</div>
                            <h4>Equipped Badge</h4>
                            <h3 class="mb-3">{{ equipped_badge.name }}</h3>
                            <small class="d-block mb-2">{{ equipped_badge.description }}</small>
                            <button class="btn btn-light btn-sm" onclick="unequipBadge()">
                                <i class="fas fa-times"></i> Unequip
                            </button>
                        {% else %}
                            <div class="current-badge-icon">üë§</div>
                            <h4>No Badge Equipped</h4>
                            <p class="mb-0">Equip a badge from your collection!</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Achievement Banner -->
        {% if earned_badge_ids|length == all_badges|length %}
        <div class="achievement-banner">
            <h4><i class="fas fa-crown me-2"></i> Ultimate Achievement Unlocked!</h4>
            <p class="mb-0">You've earned all badges! You're a true coding master! üéâ</p>
        </div>
        {% endif %}
        
        <!-- Coding Pathway -->
        <div class="badge-container">
            <h3 class="text-center mb-4"><i class="fas fa-road me-2"></i>Your Coding Pathway</h3>
            
            <div class="pathway-container">
                <div class="pathway-line"></div>
                <div class="pathway-progress" 
                     style="width: 
                     {% if all_badges|length > 0 %}
                        {% set completion = (earned_badge_ids|length / all_badges|length) * 100 %}
                        {% if completion > 100 %}
                            100
                        {% else %}
                            {{ completion|int }}
                        {% endif %}
                     {% else %}
                        0
                     {% endif %}%">
                </div>
                
                <div class="pathway-badges">
                    {% for badge in all_badges %}
                        {% set earned = badge.id in earned_badge_ids %}
                        {% set equipped = equipped_badge and equipped_badge.id == badge.id %}
                        
                        <div class="pathway-badge 
                            {% if earned %} earned {% else %} locked {% endif %}
                            {% if equipped %} equipped {% endif %}"
                            style="color: var(--{{ badge.color }});"
                            onclick="scrollToBadge({{ badge.id }})">
                            
                            {{ badge.icon }}
                            <div class="pathway-tooltip">
                                {{ badge.name }}<br>
                                {{ badge.xp_threshold }} XP
                            </div>
                            
                            {% if earned %}
                                <div style="position: absolute; bottom: -5px; font-size: 0.7rem; color: #27ae60;">
                                    ‚úì
                                </div>
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            </div>
            
            <div class="text-center mt-4">
                <small class="text-muted">
                    Click on pathway badges to jump to details
                </small>
            </div>
        </div>
        
        <!-- Badge Collection -->
        <div class="badge-container mt-4">
            <h3 class="text-center mb-4"><i class="fas fa-medal me-2"></i>Badge Collection</h3>
            
            <div class="row">
                {% for badge in all_badges %}
                    {% set earned = badge.id in earned_badge_ids %}
                    {% set equipped = equipped_badge and equipped_badge.id == badge.id %}
                    
                    <div class="col-lg-4 col-md-6" id="badge-card-{{ badge.id }}">
                        <div class="badge-card 
                            badge-{{ badge.color }}
                            {% if earned %} earned {% else %} locked {% endif %}
                            {% if equipped %} equipped {% endif %}"
                            id="badge-{{ badge.id }}">
                            
                            {% if earned %}
                                <div class="badge-shine"></div>
                            {% endif %}
                            
                            <div class="text-center">
                                <div class="badge-icon">{{ badge.icon }}</div>
                                <h4>{{ badge.name }}</h4>
                                <p class="text-muted">{{ badge.description }}</p>
                                
                                <div class="badge-level badge-level-{{ badge.color }}">
                                    {{ badge.level }}
                                </div>
                                
                                <!-- XP Requirement -->
                                <div class="mt-3">
                                    <small class="d-block">
                                        <i class="fas fa-star"></i> {{ badge.xp_threshold }} XP Required
                                    </small>
                                    
                                    <!-- Progress Bar -->
                                    <div class="xp-progress">
                                        {% if badge.xp_threshold > 0 %}
                                            {% set badge_progress = (current_xp / badge.xp_threshold) * 100 %}
                                            {% if badge_progress > 100 %}
                                                {% set badge_progress = 100 %}
                                            {% endif %}
                                            <div class="xp-progress-bar bg-warning" style="width: {{ badge_progress|int }}%"></div>
                                        {% else %}
                                            <div class="xp-progress-bar bg-warning" style="width: 100%"></div>
                                        {% endif %}
                                    </div>
                                    
                                    <small>
                                        {% if earned %}
                                            <span class="text-success">
                                                <i class="fas fa-check-circle"></i> Earned
                                                {% if badge == all_badges[-1] and earned %}
                                                    üèÜ
                                                {% endif %}
                                            </span>
                                        {% else %}
                                            {{ badge.xp_threshold - current_xp }} XP needed
                                        {% endif %}
                                    </small>
                                </div>
                                
                                <!-- Action Buttons -->
                                <div class="mt-3">
                                    {% if earned %}
                                        {% if equipped %}
                                            <button class="btn btn-success btn-sm w-100" disabled>
                                                <i class="fas fa-check"></i> Currently Equipped
                                            </button>
                                        {% else %}
                                            <button class="btn btn-primary btn-sm w-100" 
                                                    onclick="equipBadge({{ badge.id }})">
                                                <i class="fas fa-user-check"></i> Equip This Badge
                                            </button>
                                        {% endif %}
                                    {% else %}
                                        <button class="btn btn-outline-secondary btn-sm w-100" disabled>
                                            <i class="fas fa-lock"></i> Locked - Keep Coding!
                                        </button>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
            
            <!-- Legend -->
            <div class="row mt-5">
                <div class="col-12">
                    <h5><i class="fas fa-info-circle me-2"></i>Badge Levels Legend:</h5>
                    <div class="d-flex flex-wrap gap-2 mt-3">
                        <span class="badge badge-level-bronze px-3 py-2">
                            <i class="fas fa-chess-pawn me-1"></i> Bronze - Beginner
                        </span>
                        <span class="badge badge-level-silver px-3 py-2">
                            <i class="fas fa-chess-knight me-1"></i> Silver - Intermediate
                        </span>
                        <span class="badge badge-level-gold px-3 py-2">
                            <i class="fas fa-chess-bishop me-1"></i> Gold - Expert
                        </span>
                        <span class="badge badge-level-platinum px-3 py-2">
                            <i class="fas fa-chess-rook me-1"></i> Platinum - Legend
                        </span>
                        <span class="badge badge-level-diamond px-3 py-2">
                            <i class="fas fa-chess-queen me-1"></i> Diamond - Mythic
                        </span>
                        <span class="badge badge-level-legendary px-3 py-2">
                            <i class="fas fa-chess-king me-1"></i> Legendary - Boss
                        </span>
                    </div>
                </div>
            </div>
            
            <!-- Progress Summary -->
            <div class="row mt-4">
                <div class="col-12">
                    <div class="progress" style="height: 25px;">
                        {% set next_badge = all_badges|selectattr('xp_threshold', 'gt', current_xp)|first %}
                        {% if next_badge %}
                            {% set progress_percent = (current_xp / next_badge.xp_threshold) * 100 %}
                            {% if progress_percent > 100 %}
                                {% set progress_percent = 100 %}
                            {% endif %}
                            <div class="progress-bar bg-success progress-bar-striped progress-bar-animated" 
                                 style="width: {{ progress_percent|int }}%">
                                <strong>{{ progress_percent|int }}% to {{ next_badge.name }}</strong>
                            </div>
                        {% else %}
                            <div class="progress-bar bg-success progress-bar-striped" style="width: 100%">
                                <strong>üéâ All Badges Earned! üéâ</strong>
                            </div>
                        {% endif %}
                    </div>
                    <div class="text-center mt-2">
                        {% if next_badge %}
                            <small class="text-muted">
                                {{ next_badge.xp_threshold - current_xp }} more XP needed for your next badge: 
                                <strong>{{ next_badge.name }}</strong>
                            </small>
                        {% else %}
                            <small class="text-success">
                                <i class="fas fa-trophy"></i> You've conquered all coding challenges!
                            </small>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Floating Badge Counter -->
    <div class="floating-badge" onclick="scrollToTop()">
        <i class="fas fa-trophy"></i>
        <div class="badge-counter">{{ earned_badge_ids|length }}</div>
    </div>
    
    <script>
        function equipBadge(badgeId) {
            fetch(`/badges/equip/${badgeId}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showNotification('Badge equipped successfully!', 'success');
                    setTimeout(() => location.reload(), 1500);
                } else {
                    showNotification(data.message, 'error');
                }
            })
            .catch(error => {
                showNotification('Error equipping badge', 'error');
            });
        }
        
        function unequipBadge() {
            fetch('/badges/unequip', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showNotification('Badge unequipped', 'info');
                    setTimeout(() => location.reload(), 1500);
                }
            });
        }
        
        function scrollToBadge(badgeId) {
            const element = document.getElementById(`badge-card-${badgeId}`);
            if (element) {
                element.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'center' 
                });
                
                // Add highlight effect
                element.style.transition = 'all 0.3s';
                element.style.boxShadow = '0 0 30px rgba(255,215,0,0.5)';
                setTimeout(() => {
                    element.style.boxShadow = '';
                }, 2000);
            }
        }
        
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function showNotification(message, type) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `alert alert-${type === 'error' ? 'danger' : type} position-fixed`;
            notification.style.cssText = `
                top: 20px;
                right: 20px;
                z-index: 9999;
                min-width: 250px;
                animation: slideIn 0.3s ease;
            `;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'} me-2"></i>
                ${message}
            `;
            
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // Add CSS for notifications
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
        
        // Add hover effects to badge cards
        document.querySelectorAll('.badge-card.earned').forEach(card => {
            card.addEventListener('mouseenter', function() {
                if (!this.classList.contains('equipped')) {
                    this.style.transform = 'translateY(-10px) scale(1.02)';
                    this.style.boxShadow = '0 20px 40px rgba(0,0,0,0.2)';
                    this.style.zIndex = '5';
                }
            });
            
            card.addEventListener('mouseleave', function() {
                if (!this.classList.contains('equipped')) {
                    this.style.transform = 'translateY(0) scale(1)';
                    this.style.boxShadow = '0 5px 15px rgba(0,0,0,0.1)';
                    this.style.zIndex = '1';
                }
            });
        });
        
        // Initialize progress bar animation
        document.addEventListener('DOMContentLoaded', function() {
            const progressBar = document.querySelector('.pathway-progress');
            if (progressBar) {
                // Trigger animation
                setTimeout(() => {
                    progressBar.style.transition = 'width 2s ease-in-out';
                }, 500);
            }
        });
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>